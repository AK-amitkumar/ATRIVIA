<?xml version="1.0" encoding="UTF-8"?>
<templates id="template">

    <t t-extend="Orderline">


        <t t-jquery=".info-list" t-operation="after">
            <div t-if="line.ms_info and line.ms_info.created" class="ms_info">
                added by
                <t t-esc="line.ms_info.created.user.name"/>
                (<t t-esc="line.ms_info.created.pos.name"/>)
                <t t-if="line.ms_info.changed and line.ms_info.changed.pos.id != line.ms_info.created.pos.id">
                    , edited by
                    <t t-esc="line.ms_info.changed.user.name"/>
                    (<t t-esc="line.ms_info.changed.pos.name"/>)
                </t>
            </div>
        </t>


        <t t-jquery="span.price" t-operation="replace">
            <span class="price">
                <t t-if="line.order.is_return_order">
                    <t t-esc="widget.format_currency(line.get_display_price()*-1)"/>
                </t>
                <t t-if="!line.order.is_return_order">
                    <t t-esc="widget.format_currency(line.get_display_price())"/>
                </t>
            </span>
        </t>
        <t t-jquery="ul.info-list" t-operation="replace">
            <ul class="info-list">
                <t t-if="line.get_quantity_str() !== '1' || line.selected ">
                    <li class="info">
                        <t t-if="line.order.is_return_order">
                            <em>
                                -
                                <t t-esc="line.get_quantity_str()"/>
                            </em>
                        </t>
                        <t t-if="!line.order.is_return_order">
                            <em>
                                <t t-esc="line.get_quantity_str()"/>
                            </em>
                        </t>
                        <t t-esc="line.get_unit().name"/>
                        at
                        <t t-esc="widget.format_currency(line.get_unit_display_price(),'Product Price')"/>
                        /
                        <t t-esc="line.get_unit().name"/>
                    </li>
                </t>
                <t t-if="line.get_discount_str() !== '0'">
                    <li class="info">
                        Con un
                        <em>
                            <t t-esc="line.get_discount_str()"/>%
                        </em>
                        descuento
                    </li>
                </t>
            </ul>
        </t>
    </t>

    <t t-extend="ProductListWidget">
        <t t-jquery=".product-list-scroller.touch-scrollable" t-operation="prepend">
            <div id="refund_order_notify">
                ESTO ES UNA NOTA DE CRÃ‰DITO
            </div>
        </t>
    </t>

    <t t-extend="OrderSelectorWidget">

        <t t-jquery="span.order-button.select-order.selected" t-operation="append">
            <t t-if="order.ms_info and order.ms_info.created">
                <t t-if="order.ms_info.created" class="pos_selector_info">
                    <t t-esc="order.ms_info.created.pos.name"/>
                </t>
            </t>
        </t>

        <t t-jquery="t[t-if='order === widget.pos.get_order()'] .order-sequence" t-operation="replace">
            <span class='order-sequence'>
                <t t-if="order.new_order">
                    <span class="new_order">NUEVO</span>
                </t>
                <t t-if="!order.new_order">
                    <t t-esc='order.sequence_number'/>
                </t>
            </span>
        </t>

        <t t-jquery="t[t-if='order !== widget.pos.get_order()'] .order-sequence" t-operation="replace">
            <span class='order-sequence'>
                <t t-if="order.new_order">NUEVO</t>
                <t t-if="!order.new_order">
                    <t t-esc='order.sequence_number'/>
                </t>
            </span>
        </t>
    </t>


</templates>